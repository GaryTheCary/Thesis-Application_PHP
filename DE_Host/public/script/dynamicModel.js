(function(){var e,t,n,i,o,r;r={group:null,container:null,controls:null,stats:null,particlesData:[],camera:null,scene:null,renderer:null,positions:null,colors:null,particles:null,pointCloud:null,particlePositions:null,linesMesh:null,maxParticleCount:500,particleCount:300,r:800,rHalf:400},t={showDots:!0,showLines:!0,minDistance:150,limitConnections:!1,maxConnections:20,particleCount:500},n=function(){var e,t,n,o,s,a,l,c,p,d,u,m,w;for(r.container=document.getElementById("stack_graph"),r.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,4e3),r.camera.position.z=1750,r.controls=new THREE.OrbitControls(r.camera,r.container),r.scene=new THREE.Scene,r.group=new THREE.Group,r.scene.add(r.group),r.r=Math.floor(window.innerHeight),t=new THREE.BoxHelper(new THREE.Mesh(new THREE.BoxGeometry(r.r,r.r,r.r))),t.material.color.setHex(526344),t.material.blending=THREE.AdditiveBlending,t.material.transparent=!0,r.group.add(t),d=r.maxParticleCount*r.maxParticleCount,r.positions=new Float32Array(3*d),r.colors=new Float32Array(3*d),c=new THREE.PointsMaterial({color:16777215,size:3,blending:THREE.AdditiveBlending,transparent:!0,sizeAttenuation:!1}),r.particles=new THREE.BufferGeometry,r.particlePositions=new Float32Array(3*r.maxParticleCount),n=o=0,p=r.maxParticleCount;p>=0?p>o:o>p;n=p>=0?++o:--o)200>=n?(u=Math.random()*r.r-r.r/2,m=Math.random()*r.r-r.r/2,w=Math.random()*r.r-r.r/2):(u=0,m=0,w=0),r.particlePositions[3*n]=u,r.particlePositions[3*n+1]=m,r.particlePositions[3*n+2]=w,r.particlesData.push({velocity:new THREE.Vector3(0,0,0),numConnections:0});return r.particles.setDrawRange(0,r.particleCount),r.particles.addAttribute("position",new THREE.BufferAttribute(r.particlePositions,3).setDynamic(!0)),r.pointCloud=new THREE.Points(r.particles,c),r.group.add(r.pointCloud),e=new THREE.BufferGeometry,e.addAttribute("position",new THREE.BufferAttribute(r.positions,3).setDynamic(!0)),e.addAttribute("color",new THREE.BufferAttribute(r.colors,3).setDynamic(!0)),e.computeBoundingSphere(),e.setDrawRange(0,0),s=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,blending:THREE.AdditiveBlending,transparent:!0}),r.linesMesh=new THREE.LineSegments(e,s),r.group.add(r.linesMesh),r.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),r.renderer.setPixelRatio(window.devicePixelRatio),r.renderer.setSize(window.innerWidth,window.innerHeight),r.renderer.gammaInput=!0,r.renderer.gammaOutput=!0,r.container.appendChild(r.renderer.domElement),r.stats=new Stats,r.stats.domElement.style.position="absolute",r.stats.domElement.style.top="0px",r.container.appendChild(r.stats.domElement),a=-1*window.innerWidth/2.5,l=window.innerHeight/4,console.log(l),console.log(a),r.group.position.set(a,l,0),window.addEventListener("resize",i,!1)},i=function(){return r.camera.aspect=window.innerWidth/window.innerHeight},e=function(){var n,i,s,a,l,c,p,d,u,m,w,E,H,P,g,C,h,y;for(y=0,i=0,E=0,p=u=0,g=r.particleCount;g>=0?g>u:u>g;p=g>=0?++u:--u)r.particlesData[p].numConnections=0;for(p=m=0,C=r.particleCount;C>=0?C>m:m>C;p=C>=0?++m:--m)if(H=r.particlesData[p],r.particlePositions[3*p]+=H.velocity.x,r.particlePositions[3*p+1]+=H.velocity.y,r.particlePositions[3*p+2]+=H.velocity.z,r.rHalf=r.r/2,(r.particlePositions[3*p+1]<-r.rHalf||r.particlePositions[3*p+1]>r.rHalf)&&(H.velocity.y=-H.velocity.y),(r.particlePositions[3*p]<-r.rHalf||r.particlePositions[3*p]>r.rHalf)&&(H.velocity.x=-H.velocity.x),(r.particlePositions[3*p+2]<-r.rHalf||r.particlePositions[3*p+2]>r.rHalf)&&(H.velocity.z=-H.velocity.z),!(t.limitConnections&&H.numConnections>=t.maxConnections))for(d=p+1,d=w=0,h=r.particleCount;h>=0?h>w:w>h;d=h>=0?++w:--w)P=r.particlesData[d],t.limitConnections&&P.numConnections>=t.maxConnections||(a=r.particlePositions[3*p]-r.particlePositions[3*d],l=r.particlePositions[3*p+1]-r.particlePositions[3*d+1],c=r.particlePositions[3*p+2]-r.particlePositions[3*d+2],s=Math.sqrt(a*a+l*l+c*c),s<t.minDistance&&(H.numConnections++,P.numConnections++,n=1-s/t.minDistance,r.positions[y++]=r.particlePositions[3*p],r.positions[y++]=r.particlePositions[3*p+1],r.positions[y++]=r.particlePositions[3*p+2],r.positions[y++]=r.particlePositions[3*d],r.positions[y++]=r.particlePositions[3*d+1],r.positions[y++]=r.particlePositions[3*d+2],r.colors[i++]=n,r.colors[i++]=n,r.colors[i++]=n,r.colors[i++]=n,r.colors[i++]=n,r.colors[i++]=n,E++));return r.linesMesh.geometry.setDrawRange(0,2*E),r.linesMesh.geometry.attributes.position.needsUpdate=!0,r.linesMesh.geometry.attributes.color.needsUpdate=!0,r.pointCloud.geometry.attributes.position.needsUpdate=!0,requestAnimationFrame(e),r.stats.update(),o()},o=function(){var e;return e=.001*Date.now(),r.group.rotation.y=.1*e,r.renderer.render(r.scene,r.camera)},n(),e()}).call(this);